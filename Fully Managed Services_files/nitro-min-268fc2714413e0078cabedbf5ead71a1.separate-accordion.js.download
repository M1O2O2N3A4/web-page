(function(a){"use strict";a(document).ready(function(){function s(a){const s=document.cookie.split(";");for(let e=0;e<s.length;e++){const o=s[e].trim();if(o.startsWith(a+"=")){return o.substring(a.length+1)}}return null}function e(a,s,e){const o=new Date;o.setTime(o.getTime()+e*24*60*60*1e3);document.cookie=a+"="+s+"; expires="+o.toUTCString()}function o(a,e){const o=e==="yes"?"no":"yes";const t="voted_"+a+"_"+o;return s(t)==="1"}function t(t,n){const d=t.attr("data-id");const i=t.attr("data-value");const c=t.find(".count");const l="voted_"+d+"_"+n;if(o(d,n)){setTimeout(function(){a("body").append('<div class="aagb-feedback-thankyou">You can only vote for one option.</div>')},500);setTimeout(function(){a(".aagb-feedback-thankyou").remove()},3e3);return}if(s(l)){setTimeout(function(){a("body").append('<div class="aagb-feedback-thankyou">You have already voted</div>')},500);setTimeout(function(){a(".aagb-feedback-thankyou").remove()},3e3);return}let r=parseInt(c.text(),10);r++;c.text(r);e(l,"1",365);a.ajax({type:"POST",url:aagb_local_object.ajax_url,data:{action:"update_post_meta_action",post_id:d,value:n,count:r},success:function(s){console.log("Response from server: "+s);a('.feedback-btn-wrap .feedback-btn[data-id="'+d+'"][data-value="'+i+'"]').addClass("active");setTimeout(function(){a("body").append('<div class="aagb-feedback-thankyou">Thank you for your feedback!</div>')},500);setTimeout(function(){a(".aagb-feedback-thankyou").remove()},3e3)}})}const n=a(".feedback-btn");n.each(function(){a(this).on("click",function(s){const e=a(this).data("value");t(a(this),e)})});a(".feedback-btn-wrap .feedback-btn").each(function(){var e=a(this).data("id");var o=a(this).data("value");a.ajax({url:aagb_local_object.ajax_url,type:"POST",data:{action:"get_post_meta_by_id",data_id:e},success:function(t){if(t[o]==""){t[o]=0}a('.feedback-btn-wrap .feedback-btn[data-id="'+e+'"][data-value="'+o+'"] .count').text(t[o]);const n="voted_"+e+"_"+o;if(s(n)){a('.feedback-btn-wrap .feedback-btn[data-id="'+e+'"][data-value="'+o+'"]').addClass("active");return}}})})});a(document).on("click",".aab__accordion_head",function(){const s=a(this);const e=s.parent();const o=s.children(".aab__accordion_icon").children(".aab__icon");const t=e.children(".aab__accordion_body");if(o.hasClass("dashicons-plus-alt2")){o.removeClass("dashicons-plus-alt2");o.addClass("dashicons-minus")}else if(o.hasClass("dashicons-minus")){o.removeClass("dashicons-minus");o.addClass("dashicons-plus-alt2")}else if(o.hasClass("dashicons-arrow-down-alt2")){o.removeClass("dashicons-arrow-down-alt2");o.addClass("dashicons-arrow-up-alt2")}else if(o.hasClass("dashicons-arrow-up-alt2")){o.removeClass("dashicons-arrow-up-alt2");o.addClass("dashicons-arrow-down-alt2")}else if(o.hasClass("dashicons-arrow-down")){o.removeClass("dashicons-arrow-down");o.addClass("dashicons-arrow-up")}else if(o.hasClass("dashicons-arrow-up")){o.removeClass("dashicons-arrow-up");o.addClass("dashicons-arrow-down")}else if(o.hasClass("dashicons-plus-alt")){o.removeClass("dashicons-plus-alt");o.addClass("dashicons-dismiss")}else if(o.hasClass("dashicons-dismiss")){o.removeClass("dashicons-dismiss");o.addClass("dashicons-plus-alt")}else if(o.hasClass("dashicons-insert")){o.removeClass("dashicons-insert");o.addClass("dashicons-remove")}else if(o.hasClass("dashicons-remove")){o.removeClass("dashicons-remove");o.addClass("dashicons-insert")}t.slideToggle()})})(jQuery);